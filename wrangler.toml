name = "tomoshi"
main = "src/server/index.ts"
compatibility_date = "2025-01-29"
compatibility_flags = ["nodejs_compat"]

[assets]
binding = "ASSETS"
not_found_handling = "single-page-application"
run_worker_first = ["/api/*"]

[observability]
enabled = true

[[d1_databases]]
binding = "DB"
database_name = "tomoshi-db"
database_id = "25f47489-8a6b-4c12-911c-41a23b77d5a1"
migrations_dir = "migrations"

[[kv_namespaces]]
binding = "SESSIONS"
id = "503cf8ec074f47468c244353634949c3"

[[durable_objects.bindings]]
name = "NOTIFICATION_SCHEDULER"
class_name = "NotificationScheduler"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["NotificationScheduler"]

[vars]
VAPID_SUBJECT = "mailto:admin@example.com"

# Production secrets (set via wrangler secret put)
# VAPID_PUBLIC_KEY
# VAPID_PRIVATE_KEY
